(window.webpackJsonp=window.webpackJsonp||[]).push([[16,2],{"1babca734aeb0846f8a7":function(e,t,n){"use strict";var r=n("8af190b70a6bc55c6f1b"),a=n.n(r),o=n("eb656803928a435bd3cc"),c=n("0b3cb19af78752326f59");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(c.default)(function(e){return a.a.createElement(o.a,i({margin:{top:"medium"}},e,{align:"center",responsive:!1}))}).withConfig({displayName:"PanelTitleWrap",componentId:"sc-1tyc6v3-0"})([""])},"5b42af1dd84f0af13496":function(e,t,n){"use strict";var r=n("0b3cb19af78752326f59");t.a=r.default.div.withConfig({displayName:"PanelBody",componentId:"sc-1ltb7hg-0"})(["position:absolute;right:0;left:0;top:150px;width:100%;bottom:0;padding:12px 12px 96px;overflow-y:scroll;"])},"680d9676fa8f30f6a96f":function(e,t,n){"use strict";var r=n("5ca68c6edf7ca33c5f8f"),a=n("0b3cb19af78752326f59");t.a=Object(a.default)(r.a).withConfig({displayName:"PanelTitle",componentId:"sc-1q7378k-0"})(["font-family:'wwfregular';text-transform:uppercase;line-height:1;margin-top:3px;"])},"6917858057d82f8c6e08":function(e,t,n){"use strict";var r,a=n("8af190b70a6bc55c6f1b"),o=n.n(a),c=n("0b3cb19af78752326f59"),i=n("66543f9bb6e90e461320");function s(e,t,n,a){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,c=arguments.length-3;if(t||0===c||(t={children:void 0}),1===c)t.children=a;else if(c>1){for(var i=new Array(c),s=0;s<c;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=s(n("a7c39d8357e500a5b832").h,{}),f=Object(c.default)(function(e){return o.a.createElement(i.a,l({icon:u,plain:!0,alignSelf:"end"},e))}).withConfig({displayName:"ButtonPanelClose",componentId:"sc-130tkd0-0"})(["position:absolute;top:15px;right:15px;padding:10px;border-radius:99999px;background:",";box-shadow:0px 2px 4px rgba(0,0,0,0.1);&:hover{background:",";}"],function(e){return e.theme.global.colors.brandDark},function(e){return e.theme.global.colors.brandDarker});t.a=f},"76ece85fcd21b6cc5f0c":function(e,t,n){"use strict";var r=n("8af190b70a6bc55c6f1b"),a=n.n(r),o=n("eb656803928a435bd3cc"),c=n("0b3cb19af78752326f59");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(c.default)(function(e){return a.a.createElement(o.a,i({},e,{margin:{left:"xsmall"}}))}).withConfig({displayName:"TabLinkWrapper",componentId:"sc-1j124n4-0"})(["position:relative;"])},"824fbef8e45d46ce8bcf":function(e,t,n){"use strict";var r=n("8af190b70a6bc55c6f1b"),a=n.n(r),o=n("eb656803928a435bd3cc"),c=n("0b3cb19af78752326f59");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(c.default)(function(e){return a.a.createElement(o.a,i({background:"brand",justify:"between"},e,{elevation:"small",responsive:!1}))}).withConfig({displayName:"PanelHeader",componentId:"sc-12prtg1-0"})(["position:absolute;right:0;left:0;top:0;width:100%;height:140px;@media (min-width:","){height:150px;}"],function(e){return e.theme.sizes.medium.minpx})},ab7e87eba3b6ee302e04:function(e,t,n){"use strict";var r=n("8af190b70a6bc55c6f1b"),a=n.n(r),o=n("66543f9bb6e90e461320"),c=n("0b3cb19af78752326f59");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(c.default)(function(e){return a.a.createElement(o.a,i({plain:!0},e))}).withConfig({displayName:"TabLink",componentId:"sc-15d3rks-0"})(["font-family:'wwfregular';text-transform:uppercase;font-weight:normal;line-height:1;padding:0 ",";color:",";opacity:1;border-bottom:4px solid;border-color:",";&:hover{color:",";}"],function(e){return e.theme.global.edgeSize.ms},function(e){var t=e.theme,n=e.active;return t.global.colors[n?"white":"brandLight"]},function(e){var t=e.theme;return e.active?t.global.colors.white:"transparent"},function(e){return e.theme.global.colors.white})},ad9f6020006dcf95ec37:function(e,t,n){"use strict";n.r(t);var r,a=n("8af190b70a6bc55c6f1b"),o=n.n(a),c=(n("8a2d1b95e05b6a321e74"),n("d7dd51e1bf6bfc2c9c3d")),i=n("a28fc3c963a1d4d1a2e5"),s=n("0d7f0986bcd2f33d8a2a"),l=n("ab4cb61bcb2dc161defb"),u=n("ab039aecd4a1d4fedc0e"),f=n("0b3cb19af78752326f59"),d=n("eb656803928a435bd3cc"),b=n("66543f9bb6e90e461320"),p=n("761b1f7fdd256e4f5426"),m=n("045dd844c9ae122c636a"),y=n("d6f259ffb10cc810b5a4"),g=n("adc20f99e57c573c589c"),h=n("d95b0cf107403b178365"),v=n("c8e6563c3537109b383a"),O=n("968c3c585cf17da94a14"),j=n("a7c39d8357e500a5b832"),_=n("da67b01eafe6c5aeeace"),w=n("ab7e87eba3b6ee302e04"),x=n("76ece85fcd21b6cc5f0c"),k=n("d02bbf3fc84cb2a5f54d"),S=n("824fbef8e45d46ce8bcf"),E=n("680d9676fa8f30f6a96f"),M=n("1babca734aeb0846f8a7"),P=n("5b42af1dd84f0af13496"),A=n("6917858057d82f8c6e08"),C=n("ab7d7caa0ee3a73c9e57"),R=n("5ca68c6edf7ca33c5f8f"),D=n("76abbe2db5a955046df2"),T=n("b4095948cd13c8ec6368"),I=n("d11a8f0bb6e09a1b2c13"),N=n("422249433a2d25af359d"),L=n("9bd72a5c9fd46870e6a9"),F=n("b339da35c6d426de3f45");function $(e,t,n,a){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,c=arguments.length-3;if(t||0===c||(t={children:void 0}),1===c)t.children=a;else if(c>1){for(var i=new Array(c),s=0;s<c;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var W,Z=function(e){var t=e.name,n=e.valueFormatted,r=e.x0,a=e.x1,o=e.y0,c=e.y1,i=e.color,s=e.align,l=c-o,u=a-r;return $("g",{},void 0,$("rect",{x:r,y:o,width:u,height:l,fill:i},void 0,$("title",{},void 0,"".concat(t," (").concat(n,")"))),l>3&&$("text",{x:"start"===s?r+u+4:r-4,y:o+l/2+4,textAnchor:s,fontSize:"10"},void 0,"".concat(n," ").concat(t)))};var z,U=function(e){var t=e.link,n=e.color;return function(e,t,n,r){W||(W="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var c=new Array(o),i=0;i<o;i++)c[i]=arguments[i+3];t.children=c}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:W,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("path",{d:Object(F.sankeyLinkHorizontal)()(t),style:{fill:"none",strokeOpacity:t.source&&t.target&&t.source.key===t.target.key?"0.6":"0.4",stroke:n,strokeWidth:Math.max(1,t.width)}})};function H(e,t,n,r){z||(z="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var c=new Array(o),i=0;i<o;i++)c[i]=arguments[i+3];t.children=c}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:z,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){K(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(e){var t=e.data,n=e.width,r=e.height,a=e.direction,c=t.links?r+6*(t.links.length-1):r,i=Object(F.sankey)().nodeWidth(10).nodePadding(6).nodeSort(function(e,t){return e.index>t.index?1:-1}).linkSort(function(e,t){return e.index>t.index?1:-1}).extent([[170,0],[n-170,c]])(G({},t)),s=i.nodes,l=i.links,u=s[0],f=s[0].y0;u.y0=(c-r)/8,u.y1=u.y0+r;var d=u.y0-f,b=l.map(function(e){return G(G({},e),{},"from"===a?{y0:e.y0+d}:{y1:e.y1+d})});return H("svg",{width:n,height:c+10},void 0,H("g",{},void 0,s.map(function(e){return o.a.createElement(Z,q({},e,{direction:a,key:e.index,color:(s[0],"#F07D00")}))}),b.map(function(e){return H(U,{link:e,color:"#F07D00"},e.index)})))},Y="app/PanelTransfers/LOAD_DATA",Q="app/PanelTransfers/DATA_REQUESTED",V="app/PanelTransfers/DATA_LOAD_SUCCESS",X="app/PanelTransfers/DATA_LOAD_ERROR",ee="apDp/PanelTransfers/SET_ANALYSIS",te="apDp/PanelTransfers/SET_DIRECTION",ne="apDp/PanelTransfers/SET_NODE";function re(e,t){return{type:Y,key:e,path:t}}function ae(e,t,n){return{type:V,key:e,data:t,time:n}}function oe(e,t){return{type:Q,key:e,time:t}}function ce(e,t){return{type:X,error:e,key:t}}var ie,se=n("6542cd13fd5dd1bcffd4"),le=function(e,t){var n=e.id;return"uni"===e.dir&&e.nodes[t]?"".concat(n,"-nodes-").concat(t):"omni"===e.dir?"".concat(n,"-nodes"):null},ue=function(e){return"".concat(e.id,"-transfers")},fe=n("01e2cd22dd17a35e4094"),de={analysis:"gyres",data:{},dataRequested:{},dataReady:{}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;return Object(fe.a)(e,function(e){switch(t.type){case Q:console.log("Request layer:",t.key),e.dataRequested[t.key]=t.time;break;case V:console.log("Success loading layer:",t.key),e.data[t.key]=t.data,e.dataReady[t.key]=t.time;break;case X:console.log("Error loading transfer data... giving up!",t.key),e.dataRequested[t.key]=t.time}})},pe=Object(i.a)(se.r,function(e){return e.has("transfer")?e.get("transfer"):null}),me=Object(i.a)(se.r,function(e){return e.has("dir")?e.get("dir"):null}),ye=Object(i.a)(se.r,function(e){return e.has("node")?e.get("node"):null}),ge=function(e){return e.panelTransfers||de},he=Object(i.a)(ge,function(e){return e.data}),ve=(Object(i.a)(function(e,t){return t},he,function(e,t){return t[e]}),Object(i.a)(function(e,t){return t},he,function(e,t){if(t&&e){var n,r=t[ue(e)];return r=r&&r.filter(function(e){return e.value&&""!==e.value.trim()&&!Object(O.a)(e.value,0)}),"uni"===e.dir?n={from:t[le(e,"from")],to:t[le(e,"to")]}:(n=t[le(e)])&&"countries"===e.id&&(n=n.filter(function(e){return"Union EEZ and country"===e.POL_TYPE})),{transfer:r,nodes:n}}return null})),Oe=Object(i.a)(ge,function(e){return e.dataRequested}),je=Object(i.a)(function(e,t){return t},Oe,function(e,t){return t[e]}),_e=Object(i.a)(ge,function(e){return e.dataReady}),we=Object(i.a)(function(e,t){return t},_e,function(e,t){return t[e]}),xe=(Object(i.a)(_e,Oe,function(e,t){return!(!e||!t)&&Object.keys(e).length!==Object.keys(t).reduce(function(e,n){return t[n]?e+1:e},0)}),"app.containers.PanelTransfers"),ke=Object(u.defineMessages)({title:{id:"".concat(xe,".title"),defaultMessage:"Analyse plastic flows"},mode_gyres:{id:"".concat(xe,".mode_gyres"),defaultMessage:"Regions to gyres"},mode_countries:{id:"".concat(xe,".mode_countries"),defaultMessage:"Between countries*"},title_to_gyres:{id:"".concat(xe,".title_to_gyres"),defaultMessage:"Where does the floating debris originate that accumulates in gyre?"},title_from_gyres:{id:"".concat(xe,".title_from_gyres"),defaultMessage:"Where do ocean currents take marine debris when entering the oceans from a selected region?"},title_to_countries:{id:"".concat(xe,".title_to_countries"),defaultMessage:"Where does the floating debris originate that enters a country's EEZ?"},title_from_countries:{id:"".concat(xe,".title_from_countries"),defaultMessage:"Where do ocean currents take marine debris when entering the oceans from a selected country?"},intro_to_gyres:{id:"".concat(xe,".intro_to_gyres"),defaultMessage:"See relative emissions of marine debris by region*"},intro_from_gyres:{id:"".concat(xe,".intro_from_gyres"),defaultMessage:"See a region's relative contributions to the different gyres*"},intro_to_countries:{id:"".concat(xe,".intro_to_countries"),defaultMessage:"See relative contributions of marine debris from multiple country EEZs"},intro_from_countries:{id:"".concat(xe,".intro_from_countries"),defaultMessage:"See a country's relative contributions of marine debris to the different country EEZs"},hint_countries:{id:"".concat(xe,".hint_countries"),defaultMessage:"* In this analysis 'countries' refers to countries' individual Exclusive Economic Zones (EEZ)"},hint_gyres:{id:"".concat(xe,".hint_gyres"),defaultMessage:"* In this analysis 'regions' are based on one or more countries' Exclusive Economic Zones (EEZ)"},label_direction_countries:{id:"".concat(xe,".label_direction_countries"),defaultMessage:"Select direction"},label_direction_gyres:{id:"".concat(xe,".label_direction_gyres"),defaultMessage:"Select direction"},button_from_countries:{id:"".concat(xe,".button_from_countries"),defaultMessage:"Emitting"},button_to_countries:{id:"".concat(xe,".button_to_countries"),defaultMessage:"Receiving"},button_from_gyres:{id:"".concat(xe,".button_from_gyres"),defaultMessage:"Region"},button_to_gyres:{id:"".concat(xe,".button_to_gyres"),defaultMessage:"Gyre"},select_label_from_countries:{id:"".concat(xe,".select_label_from_countries"),defaultMessage:"Select country EEZ"},select_label_to_countries:{id:"".concat(xe,".select_label_to_countries"),defaultMessage:"Select country EEZ"},select_placeholder_from_countries:{id:"".concat(xe,".select_placeholder_from_countries"),defaultMessage:"Emitting country EEZ"},select_placeholder_to_countries:{id:"".concat(xe,".select_placeholder_to_countries"),defaultMessage:"Receiving country EEZ"},select_label_from_gyres:{id:"".concat(xe,".select_label_from_gyres"),defaultMessage:"Select region"},select_label_to_gyres:{id:"".concat(xe,".select_label_to_gyres"),defaultMessage:"Select gyre"},select_placeholder_from_gyres:{id:"".concat(xe,".select_placeholder_from_gyres"),defaultMessage:"Emitting region"},select_placeholder_to_gyres:{id:"".concat(xe,".select_placeholder_to_gyres"),defaultMessage:"Receiving gyre"},noDataForNode:{id:"".concat(xe,".noDataForNode"),defaultMessage:"No data for previously selected option"}});function Se(e,t,n,r){ie||(ie="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var c=new Array(o),i=0;i<o;i++)c[i]=arguments[i+3];t.children=c}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:ie,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ae=f.default.div.withConfig({displayName:"Analysis__Styled",componentId:"t2xtz9-0"})(["width:100%;"]),Ce=Object(f.default)(function(e){return o.a.createElement(C.a,Pe({size:"xxsmall"},e))}).withConfig({displayName:"Analysis__Hint",componentId:"t2xtz9-1"})(["font-style:italic;"]),Re=Object(f.default)(function(e){return o.a.createElement(R.a,Pe({size:"small"},e))}).withConfig({displayName:"Analysis__Label",componentId:"t2xtz9-2"})(["color:",";display:block;"],function(e){return e.theme.global.colors.grey}),De=Object(f.default)(function(e){return o.a.createElement(b.a,Pe({plain:!0},e))}).withConfig({displayName:"Analysis__ButtonDirection",componentId:"t2xtz9-3"})(["font-family:'wwfregular';text-transform:uppercase;line-height:16px;background:",";color:",";border-radius:5px;padding:2px 13px;box-shadow:0px 2px 4px rgba(0,0,0,0.2);&:hover{background:",";color:",";}opacity:1 !important;@media (min-width:","){padding:5px 15px;}"],function(e){var t=e.theme,n=e.active;return t.global.colors[n?"brand":"light"]},function(e){var t=e.theme,n=e.active;return t.global.colors[n?"white":"grey"]},function(e){var t=e.theme,n=e.disabled;return t.global.colors[n?"brand":"brandDark"]},function(e){return e.theme.global.colors.white},function(e){return e.theme.sizes.medium.minpx}),Te=function(e){return Object(L.b)(100*parseFloat(e),2,!0)},Ie=function(e,t,n,r,a,o){var c=r.id;if("gyres"===c&&t.nodes&&t.nodes[n]&&t.transfer)return t.nodes[n].filter(function(e){return t.transfer.find(function(t){return t[n]===e.code})}).map(function(e){return{value:e.code,label:e["name_".concat(a)]}}).sort(function(t,n){return e&&Object(O.a)(t.value,e)?-1:e&&Object(O.a)(n.value,e)?1:0});if("countries"===c&&t.nodes&&t.transfer){var i=o&&o.length>1&&new RegExp(Object(I.deburr)(Object(N.a)(o)),"i");return t.nodes.filter(function(r){return(!i||Object(O.a)(e,r.MRGID_EEZ)||i.test(Object(I.deburr)(Object(N.a)(r.UNION))))&&t.transfer.find(function(e){return e[n]===r.MRGID_EEZ})}).map(function(e){return{value:e.MRGID_EEZ,label:e.UNION}}).sort(function(t,n){return e&&Object(O.a)(t.value,e)?-1:e&&Object(O.a)(n.value,e)?1:Object(I.deburr)(Object(N.a)(t.label))>Object(I.deburr)(Object(N.a)(n.label))?1:-1})}return[]},Ne=function(e,t,n,r,a){var o=r.id,c="to"===n?"from":"to",i=t.transfer&&t.transfer.filter(function(t){return Object(O.a)(t[n],e)}).sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1}),s=i&&i.reduce(function(e,t){var n=t.value;return e+parseFloat(n)},0);return i&&"gyres"===o?i.map(function(e){var n=t.nodes&&t.nodes[c].find(function(t){return Object(O.a)(t.code,e[c])});return{code:e[c],label:n?n["name_".concat(a)]:e[c],value:parseFloat(e.value),ratio:parseFloat(e.value)/s}}):i&&"countries"===o?i.map(function(e){var n=t.nodes&&t.nodes.find(function(t){return Object(O.a)(t.MRGID_EEZ,e[c])});return{code:e[c],label:n?n.UNION:e[c],value:parseFloat(e.value),ratio:parseFloat(e.value)/s}}):[]},Le=function(e,t,n){return[{name:t.label,valueFormatted:"100%",key:t.value,align:"from"===n?"end":"start"}].concat(e.map(function(e){return{name:e.label,valueFormatted:"".concat(Te(e.ratio),"%"),key:e.code,align:"from"!==n?"end":"start"}}))},Fe=function(e,t){return e.map(function(e,n){return{source:"from"===t?0:n+1,target:"from"===t?n+1:0,value:e.ratio}})};var $e=Object(i.b)({data:function(e,t){var n=t.analysisConfig;return ve(e,n)}});var We,Ze=Object(c.connect)($e,function(e){return{onLoadData:function(t){e(re(ue(t),t.transfer.data)),"uni"===t.dir?(e(re(le(t,"from"),t.nodes.from.data)),e(re(le(t,"to"),t.nodes.to.data))):e(re(le(t),t.nodes.data))}}}),ze=Object(l.compose)(Ze)(Object(u.injectIntl)(function(e){var t=e.id,n=e.analysisConfig,r=e.onLoadData,c=e.data,i=e.direction,s=e.onSetDirection,l=e.onSetNode,f=e.node,b=e.intl,p=Ee(Object(a.useState)(null),2),m=p[0],y=p[1],g=Ee(Object(a.useState)(null),2),h=g[0],v=g[1],O=Object(a.useRef)(null);Object(a.useEffect)(function(){r(n)},[t]),Object(a.useEffect)(function(){!h&&O.current&&v(O.current.offsetWidth)},[O]);var j=b.locale,_=Ie(f,c,i,n,j,m),w=!f||_.find(function(e){return e.value===f}),x=w&&Ne(f,c,i,n,j);return i&&t?o.a.createElement(Ae,{ref:O},Se(D.a,{level:4},void 0,o.a.createElement(u.FormattedMessage,ke["title_".concat(i,"_").concat(t)])),Se(C.a,{},void 0,o.a.createElement(u.FormattedMessage,ke["intro_".concat(i,"_").concat(t)])),ke["hint_".concat(t)]&&Se(Ce,{},void 0,o.a.createElement(u.FormattedMessage,ke["hint_".concat(t)])),Se(Re,{},void 0,o.a.createElement(u.FormattedMessage,ke["label_direction_".concat(t)])),Se(d.a,{direction:"row",gap:"xxsmall"},void 0,["from","to"].map(function(e){return Se(De,{active:i===e,disabled:i===e,onClick:function(){return s(e)},label:o.a.createElement(u.FormattedMessage,ke["button_".concat(e,"_").concat(t)])},e)})),Se("div",{},void 0,Se(Re,{},void 0,o.a.createElement(u.FormattedMessage,ke["select_label_".concat(i,"_").concat(t)])),"gyres"===t&&Se(T.a,{id:"select-".concat(t),name:"select-".concat(t),labelKey:"label",valueKey:{key:"value",reduce:!0},value:f||"",options:_,placeholder:o.a.createElement(u.FormattedMessage,ke["select_placeholder_".concat(i,"_").concat(t)]),onChange:function(e){var t=e.value;return l(t!==f?t:null)}}),"countries"===t&&Se(T.a,{id:"select-".concat(t),name:"select-".concat(t),labelKey:"label",valueKey:{key:"value",reduce:!0},value:f||"",options:_,placeholder:o.a.createElement(u.FormattedMessage,ke["select_placeholder_".concat(i,"_").concat(t)]),onOpen:function(){return y("")},onChange:function(e){var t=e.value;return l(t!==f?t:null)},onSearch:function(e){var t=e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&");return y(t)}}),!w&&Se(Ce,{},void 0,o.a.createElement(u.FormattedMessage,ke.noDataForNode)),Se("div",{style:{width:"100%"}},void 0,h>0&&w&&x&&x.length>0&&Se(J,{data:{nodes:Le(x,w,i),links:Fe(x,i)},width:h||300,height:300,direction:i})),w&&x&&x.length>0&&Se("table",{},void 0,Se("thead",{},void 0,Se("tr",{},void 0,Se("th",{style:{textAlign:"left"}},void 0,"Name"),Se("th",{style:{textAlign:"right"}},void 0,"%"))),Se("tbody",{},void 0,x.map(function(e){return Se("tr",{},e.code,Se("td",{},void 0,e.label),Se("td",{style:{textAlign:"right"}},void 0,"".concat(Te(e.ratio)," %")))}))))):null})),Ue=n("d782b72bc5b680c7122c"),He=n("3aced5b508e7389026da"),qe=n("f178464512c7054bce4f"),Be=n.n(qe),Ge=(n("891a3600be771f0bff85"),n("c25aa7756a768876b4dc"),regeneratorRuntime.mark(et)),Ke=regeneratorRuntime.mark(tt),Je=regeneratorRuntime.mark(nt),Ye=regeneratorRuntime.mark(rt),Qe=regeneratorRuntime.mark(at),Ve=regeneratorRuntime.mark(ot),Xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.f;return regeneratorRuntime.mark(function r(){var a,o,c,i,s=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(a=0,o=s.length,c=new Array(o),i=0;i<o;i++)c[i]=s[i];case 2:if(!(a<n)){r.next=17;break}return a+=1,r.prev=4,r.next=7,Ue.call.apply(void 0,[e].concat(c));case 7:return r.abrupt("break",17);case 10:if(r.prev=10,r.t0=r.catch(4),!(a>=n)){r.next=15;break}return r.next=15,t.apply(void 0,[r.t0].concat(c));case 15:r.next=2;break;case 17:case"end":return r.stop()}},r,null,[[4,10]])})};function et(e,t){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.key,r.next=3,Object(Ue.put)(ce(e,n));case 3:case"end":return r.stop()}},Ge)}function tt(e){var t,n,r,a,o,c,i,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.key,n=e.path,l.next=3,Object(Ue.select)(je,t);case 3:return r=l.sent,l.next=6,Object(Ue.select)(we,t);case 6:if(a=l.sent,!n||!t||r||a){l.next=46;break}return o="".concat(y.l.DATA,"/").concat(n),l.prev=9,l.next=12,Object(Ue.put)(oe(t,Date.now()));case 12:return l.next=14,fetch(o);case 14:return c=l.sent,l.next=17,c.ok;case 17:if(!l.sent){l.next=36;break}if("function"!==typeof c.text){l.next=34;break}return l.next=22,c.text();case 22:if(!(i=l.sent)){l.next=31;break}return l.next=26,Be.a.parse(i,{header:!0,skipEmptyLines:!0});case 26:return s=l.sent,l.next=29,Object(Ue.put)(ae(t,s.data,Date.now()));case 29:l.next=34;break;case 31:return l.next=33,Object(Ue.put)(oe(t,!1));case 33:throw new Error(c.statusText);case 34:l.next=39;break;case 36:return l.next=38,Object(Ue.put)(oe(t,!1));case 38:throw new Error(c.statusText);case 39:l.next=46;break;case 41:return l.prev=41,l.t0=l.catch(9),l.next=45,Object(Ue.put)(oe(t,!1));case 45:throw new Error(l.t0);case 46:case"end":return l.stop()}},Ke,null,[[9,41]])}function nt(e){var t,n,r,a,o;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,c.next=3,Object(Ue.select)(se.p);case 3:if(n=c.sent,(r=new URLSearchParams(n.search)).set("transfer",t),a=r.toString(),(o=a.length>0?"?".concat(a):"")===n.search){c.next=11;break}return c.next=11,Object(Ue.put)(Object(He.push)("".concat(n.pathname).concat(o)));case 11:case"end":return c.stop()}},Je)}function rt(e){var t,n,r,a,o;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.direction,c.next=3,Object(Ue.select)(se.p);case 3:if(n=c.sent,(r=new URLSearchParams(n.search)).set("dir",t),a=r.toString(),(o=a.length>0?"?".concat(a):"")===n.search){c.next=11;break}return c.next=11,Object(Ue.put)(Object(He.push)("".concat(n.pathname).concat(o)));case 11:case"end":return c.stop()}},Ye)}function at(e){var t,n,r,a,o;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.node,c.next=3,Object(Ue.select)(se.p);case 3:if(n=c.sent,r=new URLSearchParams(n.search),t&&""!==t.trim()?r.set("node",t):r.delete("node"),a=r.toString(),(o=a.length>0?"?".concat(a):"")===n.search){c.next=11;break}return c.next=11,Object(Ue.put)(Object(He.push)("".concat(n.pathname).concat(o)));case 11:case"end":return c.stop()}},Qe)}function ot(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ue.takeEvery)(Y,Xe(tt,et,y.f));case 2:return e.next=4,Object(Ue.takeLatest)(ee,nt);case 4:return e.next=6,Object(Ue.takeLatest)(te,rt);case 6:return e.next=8,Object(Ue.takeLatest)(ne,at);case 8:case"end":return e.stop()}},Ve)}function ct(e,t,n,r){We||(We="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var c=new Array(o),i=0;i<o;i++)c[i]=arguments[i+3];t.children=c}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:We,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var st=Object(f.default)(function(e){return o.a.createElement(d.a,it({},e,{elevation:"medium"}))}).withConfig({displayName:"PanelTransfers__Styled",componentId:"j8k72h-0"})(["position:absolute;right:0;top:0;bottom:0;width:100%;pointer-events:all;@media (min-width:","){width:","px;}"],function(e){return e.theme.sizes.medium.minpx},function(e){return e.panelWidth||400}),lt=ct(j.p,{});var ut=Object(i.b)({activeAnalysis:function(e){return pe(e)},direction:function(e){return me(e)},node:function(e){return ye(e)}});var ft,dt=Object(c.connect)(ut,function(e){return{onSetAnalysis:function(t){return e(function(e){return{type:ee,id:e}}(t))},onSetDirection:function(t){return e({type:te,direction:t})},onSetNode:function(t){return e(function(e){return{type:ne,node:e}}(t))}}}),bt=Object(l.compose)(dt)(function(e){var t=e.onClose,n=e.analysesConfig,r=e.activeAnalysis,c=e.onSetAnalysis,i=e.direction,s=e.onSetDirection,l=e.onSetNode,f=e.node;Object(h.a)({key:"panelTransfers",reducer:be}),Object(g.a)({key:"panelTransfers",saga:ot});var d=Object(a.useRef)();return Object(a.useEffect)(function(){d.current.scrollTop=0},[r]),Object(a.useEffect)(function(){r?s("gyres"===r?"to":"from"):c("gyres")},[r]),Object(a.useEffect)(function(){"gyres"===r&&l("")},[i]),ct(p.a.Consumer,{},void 0,function(e){return ct(st,{background:"white",panelWidth:Object(v.b)(e)},void 0,ct(S.a,{},void 0,ct(A.a,{onClick:function(){return t()}}),ct(M.a,{},void 0,lt,ct(E.a,{},void 0,o.a.createElement(u.FormattedMessage,ke.title))),ct(_.a,{},void 0,n&&n.map(function(e){var t=e.id;return ct(x.a,{},t,ct(w.a,{onClick:function(){return c(t)},active:r===t,disabled:r===t,label:ct(k.a,{active:r===t},void 0,o.a.createElement(u.FormattedMessage,ke["mode_".concat(t)]))}))}))),o.a.createElement(P.a,{ref:d},r&&n&&ct(ze,{id:r,direction:i,onSetDirection:s,node:f,onSetNode:l,analysisConfig:n.find(function(e){var t=e.id;return Object(O.a)(t,r)})})))})}),pt=n("f9c0d22799479965d07c"),mt=n("a72b40110d9c31c9b5c5"),yt=n("02ed36e7ccc5625439c9"),gt="app.containers.PanelExplore",ht=Object(u.defineMessages)({showLayerPanel:{id:"".concat(gt,".showLayerPanel"),defaultMessage:"Layers"},showProjects:{id:"".concat(gt,".showProjects"),defaultMessage:"Show WWF-projects"},hideProjects:{id:"".concat(gt,".hideProjects"),defaultMessage:"Hide WWF-projects"},showProjectsShort:{id:"".concat(gt,".showProjectsShort"),defaultMessage:"Show projects"},hideProjectsShort:{id:"".concat(gt,".hideProjectsShort"),defaultMessage:"Hide projects"}});function vt(e,t,n,r){ft||(ft="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var c=new Array(o),i=0;i<o;i++)c[i]=arguments[i+3];t.children=c}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:ft,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"ModuleTransfers",function(){return Mt});var wt=Object(f.default)(function(e){return o.a.createElement(d.a,_t({gap:"small",direction:"row"},e))}).withConfig({displayName:"ModuleTransfers__Buttons",componentId:"sc-1sdlb11-0"})(["position:absolute;right:12px;top:22px;pointer-events:all;"]),xt=Object(f.default)(function(e){return o.a.createElement(b.a,_t({plain:!0,reverse:!0},e))}).withConfig({displayName:"ModuleTransfers__ShowButton",componentId:"sc-1sdlb11-1"})(["font-family:'wwfregular';text-transform:uppercase;line-height:16px;background:",";color:",";border-radius:20px;padding:2px 13px;box-shadow:0px 2px 4px rgba(0,0,0,0.2);&:hover{background:",";}@media (min-width:","){padding:5px 15px 5px 21px;}"],function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"white":"brand"]},function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"black":"white"]},function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"lightHover":"brandDark"]},function(e){return e.theme.sizes.medium.minpx}),kt="ModuleTransfers",St={layersMemo:null},Et=vt(j.p,{color:"white"});function Mt(e){var t=e.onSetLayers,n=e.uiState,r=e.onMemoLayers,c=e.activeLayers,i=e.firstLanding,l=e.onSetLanding,f=e.intl,d=e.analysesConfig,b=(n?Object.assign({},St,n):St).layersMemo;Object(a.useEffect)(function(){b?t(b):y.g.transfers.layers&&!i&&t(y.g.transfers.layers),i&&l()},[]),Object(a.useEffect)(function(){r(c,n)},[c]);var g=Ot(Object(a.useState)(!0),2),h=g[0],v=g[1],O=Ot(Object(a.useState)(!1),2),j=O[0],_=O[1];return vt(p.a.Consumer,{},void 0,function(e){return vt("div",{},void 0,vt(s.Helmet,{},void 0,vt("title",{},void 0,"".concat(f.formatMessage(yt.a.module_transfers_metaTitle)))),vt(pt.a,{},void 0,h&&"small"!==e&&vt(bt,{analysesConfig:d,onClose:function(){return v(!1)}}),j&&"small"===e&&vt(m.a,{full:!0},void 0,vt(bt,{analysesConfig:d,onClose:function(){return _(!1)}})),(!h&&"small"!==e||!j&&"small"===e)&&vt(wt,{},void 0,vt(xt,{onClick:function(){v(!0),_(!0)},icon:Et,label:o.a.createElement(u.FormattedMessage,ht.showLayerPanel)}))))})}var Pt=Object(i.b)({uiState:function(e){return Object(se.w)(e,{key:kt})},activeLayers:function(e){return Object(se.a)(e)},firstLanding:function(e){return Object(se.j)(e)},analysesConfig:function(e){return Object(se.c)(e,{key:"transfers"})}});var At=Object(c.connect)(Pt,function(e){return{onSetLanding:function(){return e(Object(mt.m)())},onSetLayers:function(t){return e(Object(mt.o)(t))},onMemoLayers:function(t,n){return e(Object(mt.r)(kt,Object.assign({},St,n,{layersMemo:t})))}}});t.default=Object(l.compose)(At)(Object(u.injectIntl)(Mt))},d02bbf3fc84cb2a5f54d:function(e,t,n){"use strict";var r=n("8af190b70a6bc55c6f1b"),a=n.n(r),o=n("5ca68c6edf7ca33c5f8f"),c=n("0b3cb19af78752326f59");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(c.default)(function(e){return a.a.createElement(o.a,i({size:"xlarge"},e))}).withConfig({displayName:"TabLinkAnchor",componentId:"gnhoai-0"})([""])},da67b01eafe6c5aeeace:function(e,t,n){"use strict";var r=n("8af190b70a6bc55c6f1b"),a=n.n(r),o=n("eb656803928a435bd3cc"),c=n("0b3cb19af78752326f59");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(c.default)(function(e){return a.a.createElement(o.a,i({},e,{direction:"row",gap:"xsmall"}))}).withConfig({displayName:"Tabs",componentId:"sc-10tmbft-0"})([""])},f9c0d22799479965d07c:function(e,t,n){"use strict";var r=n("0b3cb19af78752326f59");t.a=r.default.div.withConfig({displayName:"ModuleWrap",componentId:"sc-12lyby8-0"})(["position:absolute;top:0;bottom:0;right:0;left:0;background:transparent;pointer-events:none;z-index:2000;"])}}]);