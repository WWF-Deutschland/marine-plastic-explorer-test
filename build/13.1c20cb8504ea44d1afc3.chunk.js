(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{ef09d4344e98a758bac7:function(e,t,n){"use strict";n.r(t);var r,o=n("8af190b70a6bc55c6f1b"),a=n.n(o),i=(n("8a2d1b95e05b6a321e74"),n("d7dd51e1bf6bfc2c9c3d")),c=n("a28fc3c963a1d4d1a2e5"),l=n("0d7f0986bcd2f33d8a2a"),u=n("ab4cb61bcb2dc161defb"),f=n("ab039aecd4a1d4fedc0e"),s=n("0b3cb19af78752326f59"),d=n("eb656803928a435bd3cc"),p=n("66543f9bb6e90e461320"),b=n("045dd844c9ae122c636a"),m=n("6e05b15597c94fea0ef3"),h=n("422249433a2d25af359d"),y=n("c8e6563c3537109b383a"),g=n("d6f259ffb10cc810b5a4"),v=n("5ca68c6edf7ca33c5f8f"),j=n("76abbe2db5a955046df2"),O=n("ab7d7caa0ee3a73c9e57"),w=n("761b1f7fdd256e4f5426"),x=n("a7c39d8357e500a5b832"),L=n("968c3c585cf17da94a14"),E=n("0785de3f40b134973d35"),S=n("6542cd13fd5dd1bcffd4"),_=n("a72b40110d9c31c9b5c5"),C=n("621f61f3efb1abfbd15b");function k(e,t,n,o){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var c=new Array(i),l=0;l<i;l++)c[l]=arguments[l+3];t.children=c}if(t&&a)for(var u in a)void 0===t[u]&&(t[u]=a[u]);else t||(t=a||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var M=Object(s.default)(function(e){return a.a.createElement(p.a,I({plain:!0},e))}).withConfig({displayName:"ButtonDeleteLayers__TabDelete",componentId:"sc-1m79krv-0"})(["position:absolute;bottom:98%;border-radius:9999px;background:",";left:50%;transform:translate(-50%);min-width:21px;height:21px;color:",";text-align:center;font-weight:700;"],function(e){return e.theme.global.colors.white},function(e){return e.theme.global.colors.brandDark}),T=Object(s.default)(d.a).withConfig({displayName:"ButtonDeleteLayers__WrapContent",componentId:"sc-1m79krv-1"})(["pointer-events:none;"]),N=k(x.j,{color:"brandDark"});var D,z=function(e){var t=e.layerCount,n=e.updateLayers,r=e.active,a=P(Object(o.useState)(!1),2),i=a[0],c=a[1];return k(M,{tabActive:r,onClick:function(){return n()},label:k(T,{justify:"center",align:"center",fill:!0},void 0,i?N:k(v.a,{size:"xxsmall",style:{paddingTop:"1px"}},void 0,t)),onMouseEnter:function(){return c(!0)},onMouseOut:function(){return c(!1)},onBlur:function(){return c(!1)}})},F=Object(f.defineMessages)({title:{id:"".concat("app.containers.PanelExplore",".title"),defaultMessage:"Map layers"}});function U(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n,r){D||(D="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=r;else if(a>1){for(var i=new Array(a),c=0;c<a;c++)i[c]=arguments[c+3];t.children=i}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:D,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var H=Object(s.default)(function(e){return a.a.createElement(d.a,B({},e,{elevation:"medium"}))}).withConfig({displayName:"PanelExplore__Styled",componentId:"sc-39h5rt-0"})(["position:absolute;right:0;top:0;bottom:0;width:100%;pointer-events:all;@media (min-width:","){width:","px;}"],function(e){return e.theme.sizes.medium.minpx},function(e){return e.panelWidth||400}),G=Object(s.default)(function(e){return a.a.createElement(d.a,B({background:"brand",justify:"between"},e,{elevation:"small",responsive:!1}))}).withConfig({displayName:"PanelExplore__PanelHeader",componentId:"sc-39h5rt-1"})(["position:absolute;right:0;left:0;top:0;width:100%;height:140px;@media (min-width:","){height:150px;}"],function(e){return e.theme.sizes.medium.minpx}),R=s.default.div.withConfig({displayName:"PanelExplore__PanelBody",componentId:"sc-39h5rt-2"})(["position:absolute;right:0;left:0;top:150px;width:100%;bottom:0;padding:12px 12px 96px;overflow-y:scroll;"]),J=Object(s.default)(function(e){return a.a.createElement(d.a,B({margin:{top:"medium"}},e,{align:"center",responsive:!1}))}).withConfig({displayName:"PanelExplore__TitleWrap",componentId:"sc-39h5rt-3"})([""]),q=Object(s.default)(v.a).withConfig({displayName:"PanelExplore__Title",componentId:"sc-39h5rt-4"})(["font-family:'wwfregular';text-transform:uppercase;line-height:1;margin-top:3px;"]),K=Object(s.default)(function(e){return a.a.createElement(d.a,B({},e,{direction:"row",gap:"xsmall"}))}).withConfig({displayName:"PanelExplore__Tabs",componentId:"sc-39h5rt-5"})([""]),Q=Object(s.default)(function(e){return a.a.createElement(d.a,B({},e,{margin:{left:"xsmall"}}))}).withConfig({displayName:"PanelExplore__TabLinkWrapper",componentId:"sc-39h5rt-6"})(["position:relative;"]),V=Object(s.default)(function(e){return a.a.createElement(p.a,B({plain:!0},e))}).withConfig({displayName:"PanelExplore__TabLink",componentId:"sc-39h5rt-7"})(["font-family:'wwfregular';text-transform:uppercase;font-weight:normal;line-height:1;padding:0 ",";color:",";opacity:1;border-bottom:4px solid;border-color:",";&:hover{color:",";}"],function(e){return e.theme.global.edgeSize.ms},function(e){var t=e.theme,n=e.active;return t.global.colors[n?"white":"brandLight"]},function(e){var t=e.theme;return e.active?t.global.colors.white:"transparent"},function(e){return e.theme.global.colors.white}),X=Object(s.default)(function(e){return a.a.createElement(v.a,B({size:"xlarge"},e))}).withConfig({displayName:"PanelExplore__TabLinkAnchor",componentId:"sc-39h5rt-8"})([""]),Y=Object(s.default)(function(e){return a.a.createElement(d.a,B({flex:{shrink:0}},e))}).withConfig({displayName:"PanelExplore__SectionLayerGroup",componentId:"sc-39h5rt-9"})([""]),Z=Object(s.default)(function(e){return a.a.createElement(j.a,B({},e,{level:3}))}).withConfig({displayName:"PanelExplore__TitleGroup",componentId:"sc-39h5rt-10"})(["font-family:'wwfregular';font-weight:normal;margin-bottom:0;letter-spacing:0.1px;font-size:28px;line-height:29px;"]),ee=Object(s.default)(O.a).withConfig({displayName:"PanelExplore__DescriptionGroup",componentId:"sc-39h5rt-11"})(["margin-bottom:8px;"]),te=$(x.h,{}),ne=Object(s.default)(function(e){return a.a.createElement(p.a,B({icon:te,plain:!0,alignSelf:"end"},e))}).withConfig({displayName:"PanelExplore__ButtonClose",componentId:"sc-39h5rt-12"})(["position:absolute;top:15px;right:15px;padding:10px;border-radius:99999px;background:",";box-shadow:0px 2px 4px rgba(0,0,0,0.1);&:hover{background:",";}"],function(e){return e.theme.global.colors.brandDark},function(e){return e.theme.global.colors.brandDarker}),re="px",oe={tab:0},ae=$(x.p,{});var ie=Object(c.b)({projects:function(e){return Object(S.c)(e,{key:"projects"})},layersConfig:function(e){return Object(S.o)(e)},exploreConfig:function(e){return Object(S.i)(e)},locale:function(e){return Object(S.p)(e)},uiState:function(e){return Object(S.z)(e,{key:re})},activeLayers:function(e){return Object(S.a)(e)}});var ce,le=Object(i.connect)(ie,function(e){return{onSetTab:function(t,n){return e(Object(_.t)(re,Object.assign({},oe,n,{tab:t})))},onLayerInfo:function(t){e(Object(_.n)(t)),e(Object(_.u)())},onSetLayers:function(t){return e(Object(_.o)(t))},onToggleLayer:function(t){return e(Object(_.v)(t))}}}),ue=Object(u.compose)(le)(function(e){var t=e.onClose,n=e.onLayerInfo,r=e.onToggleLayer,i=e.onSetTab,c=e.projects,l=e.layersConfig,u=e.exploreConfig,s=e.locale,d=e.uiState,p=e.activeLayers,b=e.onSetLayers,m=(d?Object.assign({},oe,d):oe).tab,v=Object(o.useRef)();Object(o.useEffect)(function(){v.current.scrollTop=0},[d]);var j=u&&u[m];return $(w.a.Consumer,{},void 0,function(e){return $(H,{background:"white",panelWidth:Object(y.b)(e)},void 0,$("div",{},void 0,$(G,{},void 0,$(ne,{onClick:function(){return t()}}),$(J,{},void 0,ae,$(q,{},void 0,a.a.createElement(f.FormattedMessage,F.title))),$(K,{},void 0,l&&u&&u.map(function(e,t){var n=[];p.length>0&&(n=g.k===e.id?p.filter(function(e){return Object(h.e)(e,"".concat(g.l.id,"-"))}):p.filter(function(t){var n=l.find(function(e){return e.id===t});return n&&n.category===e.id}));var r=p.filter(function(e){return-1===n.indexOf(e)});return $(Q,{},e.id,n.length>0&&$(z,{updateLayers:function(){return b(r)},layerCount:n.length,active:Object(L.a)(m,t)}),$(V,{onClick:function(){return i(t,d)},active:Object(L.a)(m,t),disabled:Object(L.a)(m,t),label:$(X,{active:Object(L.a)(m,t)},void 0,e.title[s]||e.title[E.DEFAULT_LOCALE])}))}))),a.a.createElement(R,{ref:v},l&&j&&j.groups&&j.groups.map(function(e){return $(Y,{},e.id,$(Z,{},void 0,e.title[s]||e.title[E.DEFAULT_LOCALE]),e.description&&$(ee,{},void 0,e.description[s]||e.description[E.DEFAULT_LOCALE]),j.id!==g.k&&$(C.a,{group:e,layersConfig:l.filter(function(t){return t.category===j.id&&t.group===e.id}),locale:s,activeLayers:p,onLayerInfo:n,onToggleLayer:r}),c&&j&&j.id===g.k&&$(C.a,{group:j.id,layersConfig:U(c).sort(function(e,t){var n=e["project_title_".concat(s)]||e["project_title_".concat(E.DEFAULT_LOCALE)],r=t["project_title_".concat(s)]||t["project_title_".concat(E.DEFAULT_LOCALE)];return Object(h.d)(n,r)}),projects:!0,locale:s,activeLayers:p,onLayerInfo:n,onToggleLayer:r}))}),l&&j&&j.id!==g.k&&!j.groups&&$(Y,{},void 0,$(C.a,{group:j,layersConfig:l.filter(function(e){return e.category===j.id}),locale:s,activeLayers:p,onLayerInfo:n,onToggleLayer:r})),c&&j&&j.id===g.k&&!j.groups&&$(Y,{},void 0,$(C.a,{group:j.id,layersConfig:c,projects:!0,locale:s,activeLayers:p,onLayerInfo:n,onToggleLayer:r})))))})}),fe=n("f9c0d22799479965d07c"),se=n("02ed36e7ccc5625439c9"),de="app.containers.ModuleExplore",pe=Object(f.defineMessages)({showLayerPanel:{id:"".concat(de,".showLayerPanel"),defaultMessage:"Layers"},showProjects:{id:"".concat(de,".showProjects"),defaultMessage:"Show WWF-projects"},hideProjects:{id:"".concat(de,".hideProjects"),defaultMessage:"Hide WWF-projects"},showProjectsShort:{id:"".concat(de,".showProjectsShort"),defaultMessage:"Show projects"},hideProjectsShort:{id:"".concat(de,".hideProjectsShort"),defaultMessage:"Hide projects"}});function be(e,t,n,r){ce||(ce="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=r;else if(a>1){for(var i=new Array(a),c=0;c<a;c++)i[c]=arguments[c+3];t.children=i}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:ce,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function me(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"ModuleExplore",function(){return ke});var ve=Object(s.default)(function(e){return a.a.createElement(d.a,ge({gap:"small",direction:"row"},e))}).withConfig({displayName:"ModuleExplore__Buttons",componentId:"sc-1nskavd-0"})(["position:absolute;right:12px;top:22px;pointer-events:all;"]),je=Object(s.default)(function(e){return a.a.createElement(p.a,ge({plain:!0,reverse:!0},e))}).withConfig({displayName:"ModuleExplore__ShowButton",componentId:"sc-1nskavd-1"})(["font-family:'wwfregular';text-transform:uppercase;line-height:16px;background:",";color:",";border-radius:20px;padding:2px 13px;box-shadow:0px 2px 4px rgba(0,0,0,0.2);&:hover{background:",";}@media (min-width:","){padding:5px 15px 5px 21px;}"],function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"white":"brand"]},function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"black":"white"]},function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"lightHover":"brandDark"]},function(e){return e.theme.sizes.medium.minpx}),Oe=s.default.div.withConfig({displayName:"ModuleExplore__ProjectButtonWrap",componentId:"sc-1nskavd-2"})(["position:absolute;right:","px;top:20px;pointer-events:all;"],function(e){return e.asideOffset+20}),we=function(e){var t=e.showAll,n=e.lids,r=e.pids,o=e.onClick,i=e.small,c=ye(e,["showAll","lids","pids","onClick","small"]),l="";return l=i?t?pe.showProjectsShort:pe.hideProjectsShort:t?pe.showProjects:pe.hideProjects,a.a.createElement(je,ge({projects:!0,onClick:function(){o(t?Object(m.uniq)([].concat(me(n),me(r.map(function(e){return"".concat(g.l.id,"-").concat(e)})))):n.filter(function(e){return!Object(h.e)(e,"".concat(g.l.id,"-"))}))},label:a.a.createElement(f.FormattedMessage,l)},c))},xe="mx",Le={layersMemo:null,show:!0},Ee={show:!0},Se=be(x.z,{color:"black"}),_e=be(x.z,{color:"black"}),Ce=be(x.p,{color:"white"});function ke(e){var t=e.onSetLayers,n=e.layerIds,r=e.projects,i=e.uiState,c=e.uiURL,u=e.onMemoLayers,s=e.activeLayers,d=e.firstLanding,p=e.onSetLanding,m=e.onShow,v=e.intl,j=e.size,O=(i?Object.assign({},Le,i):Le).layersMemo,w=(c?Object.assign({},Ee,c):Ee).show;Object(o.useEffect)(function(){O?t(O):g.h.explore.layers&&(d&&0!==s.length||t(g.h.explore.layers)),d&&p()},[]),Object(o.useEffect)(function(){u(s,i)},[s]),Object(o.useEffect)(function(){"small"===j&&m(!1,c)},[j]);var x=r?r.map(function(e){return e.project_id}):[],L=n.filter(function(e){if(Object(h.e)(e,"".concat(g.l.id,"-"))){var t=e.replace("".concat(g.l.id,"-"),"");return x.indexOf(t)>-1}return!1}).map(function(e){return e.replace("".concat(g.l.id,"-"),"")}),E=r&&L.length>=r.length;return be("div",{},void 0,be(l.Helmet,{},void 0,be("title",{},void 0,"".concat(v.formatMessage(se.a.module_explore_metaTitle)))),be(fe.a,{},void 0,w&&"small"!==j&&be(Oe,{asideOffset:Object(y.b)(j)},void 0,be(we,{showAll:!E,lids:n,pids:x,onClick:t,small:Object(y.d)(j,"small"),icon:Se})),w&&"small"!==j&&be(ue,{onClose:function(){return m(!1,c)}}),w&&"small"===j&&be(b.a,{full:!0},void 0,be(ue,{onClose:function(){return m(!1,c)}})),!w&&be(ve,{},void 0,"small"!==j&&be(we,{showAll:!E,lids:n,pids:x,onClick:t,small:Object(y.d)(j,"small"),icon:_e}),be(je,{onClick:function(){m(!0,c)},icon:Ce,label:a.a.createElement(f.FormattedMessage,pe.showLayerPanel)}))))}var Pe=Object(c.b)({layerIds:function(e){return Object(S.a)(e)},projects:function(e){return Object(S.c)(e,{key:"projects"})},uiState:function(e){return Object(S.y)(e,{key:xe})},uiURL:function(e){return Object(S.z)(e,{key:xe})},activeLayers:function(e){return Object(S.a)(e)},firstLanding:function(e){return Object(S.j)(e)}});var Ae=Object(i.connect)(Pe,function(e){return{onSetLanding:function(){return e(Object(_.m)())},onSetLayers:function(t){return e(Object(_.o)(t))},onMemoLayers:function(t,n){return e(Object(_.s)(xe,Object.assign({},Le,n,{layersMemo:t})))},onShow:function(t,n){return e(Object(_.t)(xe,Object.assign({},Ee,n,{show:t})))}}});t.default=Object(u.compose)(Ae)(Object(f.injectIntl)(ke))}}]);