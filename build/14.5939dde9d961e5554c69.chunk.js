(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"4e7d534eebf4a8229e5a":function(e,t,n){"use strict";n.r(t);var o,r=n("8af190b70a6bc55c6f1b"),i=n.n(r),a=(n("8a2d1b95e05b6a321e74"),n("d7dd51e1bf6bfc2c9c3d")),c=n("a28fc3c963a1d4d1a2e5"),l=n("0d7f0986bcd2f33d8a2a"),d=n("ab4cb61bcb2dc161defb"),u=n("ab039aecd4a1d4fedc0e"),s=n("0785de3f40b134973d35"),f=n("0b3cb19af78752326f59"),m=n("eb656803928a435bd3cc"),p=n("66543f9bb6e90e461320"),b=n("5ca68c6edf7ca33c5f8f"),h=n("045dd844c9ae122c636a"),g=n("d6f259ffb10cc810b5a4"),y=n("f9c0d22799479965d07c"),v=n("a7c39d8357e500a5b832"),w=n("33be1ae2924e03abfdcb"),x=n("5fcb57e842c486d08175"),j=n("6542cd13fd5dd1bcffd4"),O=n("1b0ed09bed43ca221d1b"),S=n("a72b40110d9c31c9b5c5"),_=n("6e8b196ad89c220e8d8c"),T=n("422249433a2d25af359d"),E=n("02ed36e7ccc5625439c9"),C="app.containers.ModulePolicy",L=Object(u.defineMessages)({showLayerPanel:{id:"".concat(C,".showLayerPanel"),defaultMessage:"Policy info"},selectTopics:{id:"".concat(C,".selectTopics"),defaultMessage:"Select a policy topic to explore"},selectArchivedTopics:{id:"".concat(C,".selectArchivedTopics"),defaultMessage:"Archived topics"},select:{id:"".concat(C,".select"),defaultMessage:"Select"}}),I=n("7a0805d5a888ddc3ee44"),M=n.n(I);function k(e,t,n,r){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=r;else if(a>1){for(var c=new Array(a),l=0;l<a;l++)c[l]=arguments[l+3];t.children=c}if(t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var H=Object(f.default)(function(e){return i.a.createElement(p.a,N({plain:!0},e))}).withConfig({displayName:"TopicCard__TopicButton",componentId:"sc-1scya3m-0"})(["&:hover{box-shadow:rgba(0,0,0,0.2) 0px 2px 4px;}"]),z=Object(f.default)(function(e){return i.a.createElement(m.a,N({elevation:"small",pad:"small"},e))}).withConfig({displayName:"TopicCard__TopicInner",componentId:"sc-1scya3m-1"})(["position:relative;background-color:",";"],function(e){var t=e.isHover,n=e.theme;return t?n.global.colors.brand:"white"}),F=Object(f.default)(function(e){return i.a.createElement(m.a,N({margin:{bottom:"large"}},e))}).withConfig({displayName:"TopicCard__TopicButtonWrap",componentId:"sc-1scya3m-2"})(["width:100%;min-width:200px;max-width:300px;@media (min-width:","){width:50%;}@media (min-width:","){padding:0 6px;&:first-child{padding-left:0;}&:last-child{padding-right:0;}width:","%;}"],function(e){return e.theme.sizes.medium.minpx},function(e){return e.theme.sizes.large.minpx},function(e){var t=e.count;return e.secondary?25:100/t}),U=Object(f.default)(function(e){return i.a.createElement(b.a,N({size:"small"},e))}).withConfig({displayName:"TopicCard__Teaser",componentId:"sc-1scya3m-3"})(["color:",";"],function(e){var t=e.isHover,n=e.theme;return t?"white":n.global.colors.text.light}),D=Object(f.default)(function(e){return i.a.createElement(b.a,N({size:"xlarge"},e))}).withConfig({displayName:"TopicCard__TitleShort",componentId:"sc-1scya3m-4"})(["font-family:'wwfregular';text-transform:uppercase;line-height:1;margin-top:3px;text-align:center;color:",";"],function(e){var t=e.isHover,n=e.theme;return t?"white":n.global.colors.brand}),R=f.default.div.withConfig({displayName:"TopicCard__Select",componentId:"sc-1scya3m-5"})(["position:",";bottom:0;left:50%;transform:translate(0,","%);"],function(e){return e.secondary?"static":"absolute"},function(e){return e.secondary?0:50}),$=f.default.div.withConfig({displayName:"TopicCard__SelectText",componentId:"sc-1scya3m-6"})(["background-color:",";border-radius:99999px;padding:10px 25px 11px;box-shadow:rgba(0,0,0,0.2) 0px 2px 4px;color:white;font-family:wwfregular;text-transform:uppercase;font-size:20px;line-height:1;transform:translate(-50%,0);"],function(e){var t=e.isHover,n=e.theme;return t?n.global.colors.brandDarker:n.global.colors.brand}),B=f.default.div.withConfig({displayName:"TopicCard__SelectTextSecondary",componentId:"sc-1scya3m-7"})(["color:",";font-family:wwfregular;text-transform:uppercase;font-size:18px;line-height:1;"],function(e){var t=e.isHover,n=e.theme;return t?"white":n.global.colors.brand});var J,K=Object(u.injectIntl)(Object(f.withTheme)(function(e){var t=e.intl,n=e.onTopicSelect,o=e.topic,a=e.count,c=e.theme,l=e.secondary,d=t.locale,f=A(Object(r.useState)(!1),2),p=f[0],b=f[1];return k(F,{className:"mpx-topic-select",count:a,secondary:l},o.id,k(H,{plain:!0,hoverIndicator:!1,onClick:function(){return n(o.id)},onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}},void 0,k(z,{isHover:p},void 0,!l&&k(m.a,{align:"center"},void 0,k(function(e){return g.l[o.id](e.color)},{color:p?"white":c.global.colors.brand}),k(D,{isHover:p},void 0,o["short_".concat(d)]||o["short_".concat(s.DEFAULT_LOCALE)])),k(m.a,{align:"center",margin:{top:"small",bottom:l?"small":"medium"}},void 0,k(U,{isHover:p},void 0,k(M.a,{source:o["title_".concat(d)]||o["title_".concat(s.DEFAULT_LOCALE)]}))),k(R,{secondary:l,isHover:p},void 0,!l&&k($,{isHover:p},void 0,i.a.createElement(u.FormattedMessage,L.select)),l&&k(B,{isHover:p},void 0,i.a.createElement(u.FormattedMessage,L.select))))))}));function V(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Y(e,t,n,o){J||(J="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var a=new Array(i),c=0;c<i;c++)a[c]=arguments[c+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:J,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}n.d(t,"ModulePolicy",function(){return ue});var G=Object(f.default)(function(e){return i.a.createElement(m.a,q({gap:"small",direction:"row"},e))}).withConfig({displayName:"ModulePolicy__Buttons",componentId:"sc-1xkx6al-0"})(["position:absolute;right:12px;top:22px;pointer-events:all;"]),Q=Object(f.default)(function(e){return i.a.createElement(p.a,q({plain:!0,reverse:!0},e))}).withConfig({displayName:"ModulePolicy__ShowButton",componentId:"sc-1xkx6al-1"})(["font-family:'wwfregular';text-transform:uppercase;line-height:16px;background:",";color:",";border-radius:20px;padding:2px 13px;box-shadow:0px 2px 4px rgba(0,0,0,0.2);&:hover{background:",";}@media (min-width:","){padding:5px 15px 5px 21px;}"],function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"white":"brand"]},function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"black":"white"]},function(e){var t=e.theme,n=e.projects;return t.global.colors[n?"lightHover":"brandDark"]},function(e){return e.theme.sizes.medium.minpx}),X=Object(f.default)(function(e){return i.a.createElement(m.a,q({flex:{shrink:0},pad:"medium"},e))}).withConfig({displayName:"ModulePolicy__Overview",componentId:"sc-1xkx6al-2"})(["min-width:100%;min-width:","px;@media (min-width:","){min-width:","px;}@media (min-width:","){min-width:","px;}@media (min-width:","){min-width:","px;}@media (min-width:","){min-width:","px;}"],function(e){return e.theme.dimensions.modal.width[0]},function(e){return e.theme.sizes.medium.minpx},function(e){return e.theme.dimensions.modal.width[1]},function(e){return e.theme.sizes.large.minpx},function(e){return e.theme.dimensions.modal.width[2]},function(e){return e.theme.sizes.xlarge.minpx},function(e){return e.theme.dimensions.modal.width[3]},function(e){return e.theme.sizes.xxlarge.minpx},function(e){return e.theme.dimensions.modal.width[4]}),Z=Object(f.default)(b.a).withConfig({displayName:"ModulePolicy__TitleShort",componentId:"sc-1xkx6al-3"})(["font-family:'wwfregular';text-transform:uppercase;line-height:1;margin-top:3px;"]),ee=Object(f.default)(function(e){return i.a.createElement(b.a,q({size:"xxxlarge"},e))}).withConfig({displayName:"ModulePolicy__Title",componentId:"sc-1xkx6al-4"})(["font-family:'wwfregular';text-transform:uppercase;line-height:1;margin-top:3px;"]),te=Object(f.default)(function(e){return i.a.createElement(b.a,q({size:"xlarge"},e))}).withConfig({displayName:"ModulePolicy__TitleSelect",componentId:"sc-1xkx6al-5"})(["font-family:'wwfregular';text-transform:uppercase;line-height:1;margin-top:3px;border-bottom:1px solid rgb(218,218,218);padding-bottom:10px;"]),ne=Object(f.default)(function(e){return i.a.createElement(b.a,q({size:"large"},e))}).withConfig({displayName:"ModulePolicy__TitleSelectArchived",componentId:"sc-1xkx6al-6"})(["font-family:'wwfregular';text-transform:uppercase;line-height:1;margin-top:3px;border-bottom:1px solid rgb(218,218,218);padding-bottom:10px;"]),oe="mpol",re={layersMemo:null,viewMemo:null},ie={show:!0},ae=function(e){return!!e.find(function(e){return Object(T.c)(e,g.k)})},ce=function(e){return e.find(function(e){return Object(T.c)(e,g.k)})},le=Y(v.x,{color:"black"}),de=Y(v.x,{color:"white",size:"26px"});function ue(e){var t=e.onSetLayers,n=e.uiState,o=e.onMemo,a=e.activeLayers,c=e.firstLanding,d=e.onSetLanding,f=e.intl,p=e.onSetLayerInfo,b=e.info,v=e.uiURL,j=e.onShow,O=e.onHideLayerInfo,S=e.onShowKey,C=e.config,I=e.moduleLayer,M=f.locale,k=Object(_.c)(b),A=(n?Object.assign({},re,n):re).viewMemo,P=(v?Object.assign({},re,v):ie).show;Object(r.useEffect)(function(){c&&d()},[]),Object(r.useEffect)(function(){ae(a)?S(!0):S(!1)},[a]),Object(r.useEffect)(function(){O(),""===b&&P&&j(!0,v)}),Object(r.useEffect)(function(){if(""===b&&A&&p(A),ae(a)){var e=ce(a);p(e)}},[b,a]),Object(r.useEffect)(function(){var e={};Object(T.c)(k,g.h.policy.featuredLayer)&&(e=Object.assign({},{viewMemo:b})),o(e,n)},[a,b]);var N=ae(a),H=i.a.useRef(null),z=C&&C.find(function(e){return e.id===g.k}),F=I&&I.data.tables&&I.data.tables.topics&&I.data.tables.topics.data&&I.data.tables.topics.data.data.filter(function(e){return"1"!==e.archived}),U=I&&I.data.tables&&I.data.tables.topics&&I.data.tables.topics.data&&I.data.tables.topics.data.data.filter(function(e){return"1"===e.archived});return Y("div",{},void 0,Y(l.Helmet,{},void 0,Y("title",{},void 0,"".concat(f.formatMessage(E.a.module_explore_metaTitle)))),i.a.createElement(y.a,{ref:H},!N&&z&&H&&Y(h.a,{modal:!0,animate:!1,position:"top",margin:{top:"xxlarge"},style:{overflowY:"auto"}},void 0,Y(X,{className:"mpx-module-overview"},void 0,Y(x.a,{header:Y(m.a,{},void 0,Y(m.a,{align:"center"},void 0,Y(m.a,{},void 0,le,Y(Z,{},void 0,z["title-short"][M]||z["title-short"][s.DEFAULT_LOCALE]))),Y(m.a,{align:"center",margin:{vertical:"small"}},void 0,Y(ee,{},void 0,z.title[M]||z.title[s.DEFAULT_LOCALE]))),config:z,inject:[{tag:"[SELECT-TOPICS-CURRENT]",el:Y(m.a,{margin:{top:"medium",bottom:"small"},gap:"small"},void 0,Y(te,{},void 0,i.a.createElement(u.FormattedMessage,L.selectTopics)),Y(m.a,{direction:"row",margin:{top:"small"},wrap:!0},void 0,F&&F.map(function(e){return Y(K,{count:F.length,topic:e,onTopicSelect:function(e){return t([].concat(V(a),["".concat(g.k,"_").concat(e)]))}},e.id)})))},{tag:"[SELECT-TOPICS-ARCHIVE]",el:Y(m.a,{margin:{top:"medium",bottom:"small"}},void 0,Y(ne,{},void 0,i.a.createElement(u.FormattedMessage,L.selectArchivedTopics)),Y(m.a,{direction:"row",margin:{top:"small"}},void 0,U&&U.map(function(e){return Y(K,{secondary:!0,count:U.length,topic:e,onTopicSelect:function(e){return t([].concat(V(a),["".concat(g.k,"_").concat(e)]))}},e.id)})))}]}))),N&&Y(G,{},void 0,Y(Q,{onClick:function(){j(!0,v)},icon:de,label:i.a.createElement(u.FormattedMessage,L.showLayerPanel)})),N&&b&&P&&Y(w.a,{isModule:!0,view:b,onClose:function(){return j(!1,v)},onHome:function(){return t(g.h.policy.layers)},onSetTopic:function(e){t([g.h.policy.layers,"".concat(g.k,"_").concat(e)])},currentModule:g.h.policy})))}var se=Object(c.b)({uiState:function(e){return Object(j.z)(e,{key:oe})},activeLayers:function(e){return Object(j.a)(e)},firstLanding:function(e){return Object(j.j)(e)},info:function(e){return Object(j.l)(e)},uiURL:function(e){return Object(j.A)(e,{key:oe})},config:function(e){return Object(O.c)(e)},moduleLayer:function(e){return Object(O.b)(e,g.h.policy.featuredLayer)}});var fe=Object(a.connect)(se,function(e){return{onShowKey:function(t){return e(Object(S.r)(t))},onSetLanding:function(){return e(Object(S.m)())},onSetLayers:function(t){return e(Object(S.o)(t))},onSetLayerInfo:function(t){e(Object(S.n)(t))},onShow:function(t,n){return e(Object(S.u)(oe,Object.assign({},ie,n,{show:t})))},onHideLayerInfo:function(){return e(Object(S.v)(!1))},onMemo:function(t,n){e(Object(S.t)(oe,Object.assign({},re,n,t)))}}});t.default=Object(d.compose)(fe)(Object(u.injectIntl)(ue))}}]);